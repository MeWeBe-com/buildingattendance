<app-header [title]="'Select Location'" [selected]="selectedProperty ? selectedProperty?.status : null"></app-header>

<ion-content [ngClass]="{
'green': selectedProperty?.status == '0',
'orange': selectedProperty?.status === '1',
'red': selectedProperty?.status === '2'
}"
  [ngStyle]="{'--background': selectedProperty ? 'url(../../../assets/imgs/bg-image2.svg) center no-repeat' : 'url(../../../assets/imgs/bg-image.svg) center no-repeat'}">

  <div class="ion-padding">
    <ng-select (change)="changeLocation($event)" placeholder="Start typing to search..." [closeOnSelect]="true">
      @for (p of properties; track p?.property_id) {
      <ng-option [value]="p">
        <span class="select-status" [ngClass]="{
          'green': p?.status == '0',
          'orange': p?.status === '1',
          'red': p?.status === '2'
        }"></span>
        {{p?.property_name}}
      </ng-option>
      }
    </ng-select>
  </div>

  @if(selectedProperty){
  <div class="ion-text-center lock-icon">
    <ion-icon [name]="selectedProperty?.status == '0' ? 'lock-open-outline' :
            (selectedProperty?.status === '1' ? 'warning-outline' :
            (selectedProperty?.status === '2' ? 'lock-closed-outline' : ''))"></ion-icon>
  </div>
  }

  @if(selectedProperty){
  <div class="ion-text-center arrow-icon" (click)="checkIn()">
    <div class="arrow-bg d-flex align-items-center justify-content-center" [ngClass]="{
      'arrow-green': selectedProperty?.status == '0',
      'arrow-orange': selectedProperty?.status === '1',
      'arrow-red': selectedProperty?.status === '2'
    }">
      <ion-icon name="arrow-forward-circle-outline"></ion-icon>
    </div>

    <div class="text inter-font">
      Tap to check in
    </div>

    @if(selectedProperty?.status == '0'){
    <div class="text inter-font">
      All systems operational.
    </div>
    }
  </div>
  } @else if(selectedProperty == undefined && user?.show_company_branding){
  <div class="logo-box" [ngStyle]="{'margin-top': 'calc(' + logoTop +'px - 76px)'}">
    <img [src]="user?.company_logo">
  </div>
  }


  <ion-alert [isOpen]="isAlertOpen" [header]="alertHeader" [message]="alertMessage" [buttons]="alertButtons"
    (didDismiss)="isAlertOpen = false"></ion-alert>


</ion-content>